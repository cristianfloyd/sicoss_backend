# Mapa de Métodos - SicossOptimizado.php

## 🎯 PUNTO DE ENTRADA PRINCIPAL

### `generar_sicoss()` (línea 36)
**Parámetros principales:**
- `array $datos` - Configuración de topes y parámetros
- `retornar_datos = FALSE` - Para generar archivo TXT
- `guardar_en_bd = FALSE` - No guardar en BD por ahora
- `periodo_fiscal = null` - Se auto-determina

---

## 🔄 FLUJO PRINCIPAL DE EJECUCIÓN

### 1. **INICIALIZACIÓN** 
```
generar_sicoss() 
├── Configura variables estáticas desde MapucheConfig
├── Determina período corriente (mes/año)
└── Aplica filtros de legajos si corresponde
```

### 2. **OBTENCIÓN DE DATOS**
```
├── obtener_legajos() (línea 722)
│   ├── get_sql_legajos() (línea 837)
│   └── Ejecuta consulta SQL optimizada para legajos
│
├── obtener_conceptos_liquidados() (línea 549)
│   ├── getConsultaConceptosOptimizada() (línea 596)
│   └── determinarTablaLiquidaciones() (línea 654)
│
└── get_licencias_vigentes() (línea 275) [OPCIONAL - no evaluaremos]
```

### 3. **PROCESAMIENTO PRINCIPAL**
```
├── procesa_sicoss() (línea 1032) ⭐ MÉTODO CORE
│   ├── Para cada legajo:
│   │   ├── sumarizar_conceptos_por_tipos_grupos() (línea 1637)
│   │   ├── calcular_remuner_grupo() (línea 2011)
│   │   ├── otra_actividad() (línea 2039)
│   │   ├── codigo_os() (línea 2079)
│   │   └── VerificarAgenteImportesCERO() (línea 2061)
│   │
│   └── Retorna: Array de totales o legajos procesados
│
└── grabar_en_txt() (línea 1539) [Si retornar_datos = FALSE]
```

---

## 📊 MÉTODOS DE CÁLCULO Y PROCESAMIENTO

### **Cálculos de Situación y Revista**
- `inicializar_estado_situacion()` (línea 894)
- `evaluar_condicion_licencia()` (línea 913)
- `calcular_cambios_estado()` (línea 946)
- `calcular_dias_trabajados()` (línea 970)
- `calcular_revista_legajo()` (línea 993)

### **Procesamiento de Conceptos**
- `sumarizar_conceptos_por_tipos_grupos()` (línea 1637) - Agrupa conceptos por tipo
- `consultar_conceptos_liquidados()` (línea 1918) - Obtiene conceptos del legajo
- `calcular_remuner_grupo()` (línea 2011) - Calcula remuneración por grupo
- `calcularSACInvestigador()` (línea 1889) - SAC específico

### **Cálculos de Cargos**
- `get_limites_cargos()` (línea 517)
- `get_cargos_activos_sin_licencia()` (línea 406)
- `get_cargos_activos_con_licencia_vigente()` (línea 446)

---

## 🚀 MÉTODOS DE OPTIMIZACIÓN

### **Precarga Masiva de Datos**
- `precargar_conceptos_todos_legajos()` (línea 2271) - Evita N+1 queries
- `agrupar_conceptos_por_legajo()` (línea 2395) - Organiza datos en memoria
- `sumarizar_conceptos_optimizado()` (línea 2429) - Versión optimizada

### **Gestión de Memoria**
- `calcular_memoria_necesaria()` (línea 2775) - Estima memoria requerida
- `obtener_limite_memoria_bytes()` (línea 2905) - Límites del sistema
- `recomendar_metodo_procesamiento()` (línea 2931) - Sugiere estrategia

### **Precarga de Datos Auxiliares**
- `precargar_todos_datos_cargos()` (línea 2976)
- `precargar_otra_actividad_todos_legajos()` (línea 3289)
- `precargar_codigos_obra_social_todos_legajos()` (línea 3440)

---

## 🔍 CONSULTAS SQL OPTIMIZADAS

### **Principales Consultas**
1. **Legajos:** `get_sql_legajos()` - Obtiene datos básicos de agentes
2. **Conceptos:** `getConsultaConceptosOptimizada()` - Conceptos liquidados con grupos
3. **Licencias:** `get_licencias_vigentes()` - Licencias activas del período
4. **Cargos:** Múltiples consultas para situación laboral

---

## 📤 FLUJO ESPECÍFICO PARA TU CASO

### **Con retornar_datos = FALSE y sin licencias:**

```
generar_sicoss($datos, retornar_datos=FALSE)
│
├── 1. Inicialización y configuración
├── 2. obtener_legajos() → DataFrame legajos
├── 3. obtener_conceptos_liquidados() → DataFrame conceptos  
├── 4. procesa_sicoss() → Array totales
└── 5. grabar_en_txt() → Archivo SICOSS.txt
```

---

## 🐍 CONVERSIÓN A PANDAS - PUNTOS CLAVE

### **Consultas SQL a extraer:**
1. **Legajos** (línea 837) → `df_legajos`
2. **Conceptos** (línea 596) → `df_conceptos`  
3. **Otra Actividad** (línea 3289) → `df_otra_actividad`
4. **Códigos Obra Social** (línea 3440) → `df_obra_social`

### **Procesamiento con Pandas:**
- Usar `groupby()` para sumarización de conceptos
- `merge()` para joins entre DataFrames
- `apply()` para cálculos por legajo
- Operaciones vectorizadas para topes y validaciones

---

## 🎯 SIGUIENTE PASO SUGERIDO

**¿Qué camino quieres seguir?**

**A)** Extraer y analizar las **consultas SQL específicas** (obtener_legajos + obtener_conceptos_liquidados)

**B)** Implementar la **lógica de procesa_sicoss()** completa en Python/Pandas

**C)** Crear el **extractor de datos** que convierta consultas SQL a DataFrames

**D)** Implementar los **métodos de cálculo** (sumarizar_conceptos, calcular_remuner_grupo, etc.)

¿Por cuál empezamos? 🤔 

<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-7.5 -8 1925.625 1095.791748046875" style="max-width: 1925.625px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-svg-1749598307948-h748o8ajh"><style>#mermaid-svg-1749598307948-h748o8ajh{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:rgba(204, 204, 204, 0.87);}#mermaid-svg-1749598307948-h748o8ajh .error-icon{fill:#bf616a;}#mermaid-svg-1749598307948-h748o8ajh .error-text{fill:#bf616a;stroke:#bf616a;}#mermaid-svg-1749598307948-h748o8ajh .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-1749598307948-h748o8ajh .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-1749598307948-h748o8ajh .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-1749598307948-h748o8ajh .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-1749598307948-h748o8ajh .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-1749598307948-h748o8ajh .marker{fill:rgba(204, 204, 204, 0.87);stroke:rgba(204, 204, 204, 0.87);}#mermaid-svg-1749598307948-h748o8ajh .marker.cross{stroke:rgba(204, 204, 204, 0.87);}#mermaid-svg-1749598307948-h748o8ajh svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-1749598307948-h748o8ajh .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:rgba(204, 204, 204, 0.87);}#mermaid-svg-1749598307948-h748o8ajh .cluster-label text{fill:#ffffff;}#mermaid-svg-1749598307948-h748o8ajh .cluster-label span,#mermaid-svg-1749598307948-h748o8ajh p{color:#ffffff;}#mermaid-svg-1749598307948-h748o8ajh .label text,#mermaid-svg-1749598307948-h748o8ajh span,#mermaid-svg-1749598307948-h748o8ajh p{fill:rgba(204, 204, 204, 0.87);color:rgba(204, 204, 204, 0.87);}#mermaid-svg-1749598307948-h748o8ajh .node rect,#mermaid-svg-1749598307948-h748o8ajh .node circle,#mermaid-svg-1749598307948-h748o8ajh .node ellipse,#mermaid-svg-1749598307948-h748o8ajh .node polygon,#mermaid-svg-1749598307948-h748o8ajh .node path{fill:#1a1a1a;stroke:#2a2a2a;stroke-width:1px;}#mermaid-svg-1749598307948-h748o8ajh .flowchart-label text{text-anchor:middle;}#mermaid-svg-1749598307948-h748o8ajh .node .label{text-align:center;}#mermaid-svg-1749598307948-h748o8ajh .node.clickable{cursor:pointer;}#mermaid-svg-1749598307948-h748o8ajh .arrowheadPath{fill:#e5e5e5;}#mermaid-svg-1749598307948-h748o8ajh .edgePath .path{stroke:rgba(204, 204, 204, 0.87);stroke-width:2.0px;}#mermaid-svg-1749598307948-h748o8ajh .flowchart-link{stroke:rgba(204, 204, 204, 0.87);fill:none;}#mermaid-svg-1749598307948-h748o8ajh .edgeLabel{background-color:#1a1a1a99;text-align:center;}#mermaid-svg-1749598307948-h748o8ajh .edgeLabel rect{opacity:0.5;background-color:#1a1a1a99;fill:#1a1a1a99;}#mermaid-svg-1749598307948-h748o8ajh .labelBkg{background-color:rgba(26, 26, 26, 0.5);}#mermaid-svg-1749598307948-h748o8ajh .cluster rect{fill:rgba(64, 64, 64, 0.47);stroke:#30373a;stroke-width:1px;}#mermaid-svg-1749598307948-h748o8ajh .cluster text{fill:#ffffff;}#mermaid-svg-1749598307948-h748o8ajh .cluster span,#mermaid-svg-1749598307948-h748o8ajh p{color:#ffffff;}#mermaid-svg-1749598307948-h748o8ajh div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:#88c0d0;border:1px solid #30373a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-1749598307948-h748o8ajh .flowchartTitleText{text-anchor:middle;font-size:18px;fill:rgba(204, 204, 204, 0.87);}#mermaid-svg-1749598307948-h748o8ajh :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1749598307948-h748o8ajh_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1749598307948-h748o8ajh_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1749598307948-h748o8ajh_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1749598307948-h748o8ajh_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1749598307948-h748o8ajh_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g id="subGraph1" class="cluster default flowchart-label"><rect height="107.66666793823242" width="816.4895782470703" y="362.3333282470703" x="400.09375762939453" ry="0" rx="0" style=""/><g transform="translate(739.2447967529297, 362.3333282470703)" class="cluster-label"><foreignObject height="21.33333396911621" width="138.1875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">🔍 CONSULTAS SQL</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" id="L-A-B-0" d="M1060.656,60L1060.656,68.111C1060.656,76.222,1060.656,92.444,1060.656,103.839C1060.656,115.233,1060.656,121.8,1060.656,125.083L1060.656,128.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M986.625,185.204L947.077,193.059C907.529,200.914,828.432,216.623,788.884,229.317C749.336,242.011,749.336,251.689,749.336,256.528L749.336,261.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-D" id="L-B-D-0" d="M1121.547,207.333L1128.435,211.5C1135.323,215.667,1149.099,224,1155.987,233.006C1162.875,242.011,1162.875,251.689,1162.875,256.528L1162.875,261.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-E" id="L-B-E-0" d="M1134.688,179.319L1208.86,188.155C1283.033,196.99,1431.378,214.662,1505.551,226.781C1579.724,238.9,1579.724,245.467,1579.724,248.75L1579.724,252.033"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-F" id="L-C-F-0" d="M833.836,293.138L908.781,300.504C983.726,307.87,1133.615,322.602,1208.56,334.134C1283.505,345.667,1283.505,354,1294.045,362.029C1304.585,370.059,1325.664,377.784,1336.203,381.647L1346.743,385.51"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-D LE-F" id="L-D-F-0" d="M1252.921,303L1281.284,308.722C1309.647,314.444,1366.373,325.889,1394.736,335.778C1423.099,345.667,1423.099,354,1423.545,361.458C1423.991,368.916,1424.883,375.499,1425.329,378.79L1425.775,382.081"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-E LE-F" id="L-E-F-0" d="M1579.724,312.333L1579.724,316.5C1579.724,320.667,1579.724,329,1579.724,337.333C1579.724,345.667,1579.724,354,1568.807,362.102C1557.89,370.204,1536.057,378.075,1525.14,382.011L1514.223,385.946"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-G" id="L-F-G-0" d="M1430.393,445L1430.393,449.167C1430.393,453.333,1430.393,461.667,1430.393,470C1430.393,478.333,1430.393,486.667,1430.393,494.117C1430.393,501.567,1430.393,508.133,1430.393,511.417L1430.393,514.7"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-H" id="L-G-H-0" d="M1360.539,540.522L1240.154,546.88C1119.768,553.237,878.997,565.952,758.612,575.593C638.227,585.233,638.227,591.8,638.227,595.083L638.227,598.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-I" id="L-G-I-0" d="M1360.539,545.657L1316.987,551.159C1273.434,556.66,1186.329,567.664,1142.776,576.448C1099.224,585.233,1099.224,591.8,1099.224,595.083L1099.224,598.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-J" id="L-G-J-0" d="M1394.892,553.667L1386.104,557.833C1377.317,562,1359.742,570.333,1350.954,577.783C1342.167,585.233,1342.167,591.8,1342.167,595.083L1342.167,598.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-K" id="L-G-K-0" d="M1471.537,553.667L1481.721,557.833C1491.905,562,1512.273,570.333,1522.457,577.783C1532.641,585.233,1532.641,591.8,1532.641,595.083L1532.641,598.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-L" id="L-G-L-0" d="M1500.247,545.257L1546.42,550.826C1592.592,556.394,1684.937,567.53,1731.109,576.382C1777.281,585.233,1777.281,591.8,1777.281,595.083L1777.281,598.367"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-H LE-M" id="L-H-M-0" d="M638.227,640L638.227,644.167C638.227,648.333,638.227,656.667,755.547,668.609C872.868,680.551,1107.51,696.101,1224.831,703.877L1342.152,711.652"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-I LE-M" id="L-I-M-0" d="M1099.224,640L1099.224,644.167C1099.224,648.333,1099.224,656.667,1139.721,667.253C1180.218,677.84,1261.212,690.68,1301.709,697.1L1342.205,703.52"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-J LE-M" id="L-J-M-0" d="M1342.167,640L1342.167,644.167C1342.167,648.333,1342.167,656.667,1348.41,664.548C1354.653,672.43,1367.139,679.86,1373.382,683.575L1379.625,687.29"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-K LE-M" id="L-K-M-0" d="M1532.641,640L1532.641,644.167C1532.641,648.333,1532.641,656.667,1525.312,664.597C1517.982,672.526,1503.324,680.053,1495.995,683.816L1488.666,687.579"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-L LE-M" id="L-L-M-0" d="M1777.281,640L1777.281,644.167C1777.281,648.333,1777.281,656.667,1734.165,667.359C1691.05,678.051,1604.818,691.102,1561.702,697.627L1518.587,704.152"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-M LE-N" id="L-M-N-0" d="M1430.393,745L1430.393,749.167C1430.393,753.333,1430.393,761.667,1430.459,769.2C1430.525,776.734,1430.657,783.467,1430.723,786.834L1430.789,790.201"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-N LE-O" id="L-N-O-0" d="M1378.995,904.727L1352.892,919.016C1326.788,933.304,1274.58,961.881,1248.476,981.009C1222.372,1000.136,1222.372,1009.814,1222.372,1014.653L1222.372,1019.492"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-N LE-P" id="L-N-P-0" d="M1430.893,956.625L1430.81,962.264C1430.727,967.903,1430.56,979.181,1430.477,989.658C1430.393,1000.136,1430.393,1009.814,1430.393,1014.653L1430.393,1019.492"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;stroke-width:2px;stroke-dasharray:3;" class="edge-thickness-normal edge-pattern-dotted flowchart-link LS-C LE-T" id="L-C-T-0" d="M664.836,302.906L638.009,308.644C611.182,314.382,557.529,325.858,530.702,335.762C503.875,345.667,503.875,354,503.875,363.45C503.875,372.9,503.875,383.467,503.875,388.75L503.875,394.033"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;stroke-width:2px;stroke-dasharray:3;" class="edge-thickness-normal edge-pattern-dotted flowchart-link LS-D LE-U" id="L-D-U-0" d="M1027.078,302.364L981.931,308.192C936.783,314.02,846.488,325.677,801.34,335.672C756.193,345.667,756.193,354,756.193,363.45C756.193,372.9,756.193,383.467,756.193,388.75L756.193,394.033"/><path marker-end="url(#mermaid-svg-1749598307948-h748o8ajh_flowchart-pointEnd)" style="fill:none;stroke-width:2px;stroke-dasharray:3;" class="edge-thickness-normal edge-pattern-dotted flowchart-link LS-D LE-V" id="L-D-V-0" d="M1127.504,303L1116.363,308.722C1105.221,314.444,1082.939,325.889,1071.798,335.778C1060.656,345.667,1060.656,354,1060.656,363.45C1060.656,372.9,1060.656,383.467,1060.656,388.75L1060.656,394.033"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1222.3723945617676, 990.458330154419)" class="edgeLabel"><g transform="translate(-20.25520896911621, -9.333333969116211)" class="label"><foreignObject height="18.666667938232422" width="40.51041793823242"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">FALSE</span></div></foreignObject></g></g><g transform="translate(1430.3932304382324, 990.458330154419)" class="edgeLabel"><g transform="translate(-18.776042938232422, -9.333333969116211)" class="label"><foreignObject height="18.666667938232422" width="37.552085876464844"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">TRUE</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(503.87500762939453, 416.1666622161865)" id="flowchart-T-165" class="node default default flowchart-label"><rect height="33.66666793823242" width="137.5625" y="-16.83333396911621" x="-68.78125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-61.28125, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="122.5625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">get_sql_legajos()</span></div></foreignObject></g></g><g transform="translate(756.1927108764648, 416.1666622161865)" id="flowchart-U-166" class="node default default flowchart-label"><rect height="33.66666793823242" width="267.0729217529297" y="-16.83333396911621" x="-133.53646087646484" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-126.03646087646484, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="252.0729217529297"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">getConsultaConceptosOptimizada()</span></div></foreignObject></g></g><g transform="translate(1060.65625, 416.1666622161865)" id="flowchart-V-167" class="node default default flowchart-label"><rect height="33.66666793823242" width="241.8541717529297" y="-16.83333396911621" x="-120.92708587646484" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-113.42708587646484, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="226.8541717529297"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">determinarTablaLiquidaciones()</span></div></foreignObject></g></g><g transform="translate(-7.5, -8)" class="root"><g class="clusters"><g id="subGraph0" class="cluster default flowchart-label"><rect height="83.66666793823242" width="931.9062652587891" y="8" x="8" ry="0" rx="0" style=""/><g transform="translate(401.17188262939453, 8)" class="cluster-label"><foreignObject height="21.33333396911621" width="145.5625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">🚀 OPTIMIZACIONES</span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g transform="translate(184.4635467529297, 49.83333396911621)" id="flowchart-Q-162" class="node default default flowchart-label"><rect height="33.66666793823242" width="282.9270935058594" y="-16.83333396911621" x="-141.4635467529297" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-133.9635467529297, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="267.9270935058594"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">precargar_conceptos_todos_legajos()</span></div></foreignObject></g></g><g transform="translate(499.4948043823242, 49.83333396911621)" id="flowchart-R-163" class="node default default flowchart-label"><rect height="33.66666793823242" width="247.1354217529297" y="-16.83333396911621" x="-123.56771087646484" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-116.06771087646484, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="232.1354217529297"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">agrupar_conceptos_por_legajo()</span></div></foreignObject></g></g><g transform="translate(788.9843902587891, 49.83333396911621)" id="flowchart-S-164" class="node default default flowchart-label"><rect height="33.66666793823242" width="231.84375" y="-16.83333396911621" x="-115.921875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-108.421875, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="216.84375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">calcular_memoria_necesaria()</span></div></foreignObject></g></g></g></g><g transform="translate(1060.65625, 41.83333206176758)" id="flowchart-A-120" class="node default default flowchart-label"><rect height="36.33333396911621" width="157.5" y="-18.166666984558105" x="-78.75" ry="0" rx="0" style="fill:#ff6b6b;stroke:#d63031;" class="basic label-container"/><g transform="translate(-71.25, -10.666666984558105)" style="color:#fff;" class="label"><rect/><foreignObject height="21.33333396911621" width="142.5"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(255, 255, 255); display: inline-block; white-space: nowrap;"><span style="color:#fff;" class="nodeLabel">🎯 generar_sicoss()</span></div></foreignObject></g></g><g transform="translate(1060.65625, 170.49999618530273)" id="flowchart-B-121" class="node default default flowchart-label"><rect height="73.66666793823242" width="148.0625" y="-36.83333396911621" x="-74.03125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-66.53125, -29.33333396911621)" style="" class="label"><rect/><foreignObject height="58.66666793823242" width="133.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">⚙️ Inicialización<br />Variables estáticas<br />Configuración</span></div></foreignObject></g></g><g transform="translate(749.3359451293945, 284.8333282470703)" id="flowchart-C-123" class="node default default flowchart-label"><rect height="36.33333396911621" width="169" y="-18.166666984558105" x="-84.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-77, -10.666666984558105)" style="" class="label"><rect/><foreignObject height="21.33333396911621" width="154"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">📊 obtener_legajos()</span></div></foreignObject></g></g><g transform="translate(1162.8750038146973, 284.8333282470703)" id="flowchart-D-125" class="node default default flowchart-label"><rect height="36.33333396911621" width="271.59375" y="-18.166666984558105" x="-135.796875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-128.296875, -10.666666984558105)" style="" class="label"><rect/><foreignObject height="21.33333396911621" width="256.59375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">💰 obtener_conceptos_liquidados()</span></div></foreignObject></g></g><g transform="translate(1579.7239608764648, 284.8333282470703)" id="flowchart-E-127" class="node default default flowchart-label"><rect height="55" width="214.90625" y="-27.5" x="-107.453125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-99.953125, -20)" style="" class="label"><rect/><foreignObject height="40" width="199.90625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">📅 get_licencias_vigentes()<br />(OPCIONAL)</span></div></foreignObject></g></g><g transform="translate(1430.3932304382324, 416.1666622161865)" id="flowchart-F-129" class="node default default flowchart-label"><rect height="57.66666793823242" width="157.6875" y="-28.83333396911621" x="-78.84375" ry="0" rx="0" style="fill:#00b894;stroke:#00a085;" class="basic label-container"/><g transform="translate(-71.34375, -21.33333396911621)" style="color:#fff;" class="label"><rect/><foreignObject height="42.66666793823242" width="142.6875"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(255, 255, 255); display: inline-block; white-space: nowrap;"><span style="color:#fff;" class="nodeLabel">🔧 procesa_sicoss()<br />⭐ MÉTODO CORE</span></div></foreignObject></g></g><g transform="translate(1430.3932304382324, 536.833330154419)" id="flowchart-G-135" class="node default default flowchart-label"><rect height="33.66666793823242" width="139.70833587646484" y="-16.83333396911621" x="-69.85416793823242" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.35416793823242, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="124.70833587646484"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Para cada legajo:</span></div></foreignObject></g></g><g transform="translate(638.2265548706055, 621.833330154419)" id="flowchart-H-137" class="node default default flowchart-label"><rect height="36.33333396911621" width="334.8020935058594" y="-18.166666984558105" x="-167.4010467529297" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-159.9010467529297, -10.666666984558105)" style="" class="label"><rect/><foreignObject height="21.33333396911621" width="319.8020935058594"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">📋 sumarizar_conceptos_por_tipos_grupos()</span></div></foreignObject></g></g><g transform="translate(1099.2239570617676, 621.833330154419)" id="flowchart-I-139" class="node default default flowchart-label"><rect height="36.33333396911621" width="228.53125" y="-18.166666984558105" x="-114.265625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-106.765625, -10.666666984558105)" style="" class="label"><rect/><foreignObject height="21.33333396911621" width="213.53125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">💸 calcular_remuner_grupo()</span></div></foreignObject></g></g><g transform="translate(1342.1666679382324, 621.833330154419)" id="flowchart-J-141" class="node default default flowchart-label"><rect height="36.33333396911621" width="157.3541717529297" y="-18.166666984558105" x="-78.67708587646484" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-71.17708587646484, -10.666666984558105)" style="" class="label"><rect/><foreignObject height="21.33333396911621" width="142.3541717529297"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">🏢 otra_actividad()</span></div></foreignObject></g></g><g transform="translate(1532.6406288146973, 621.833330154419)" id="flowchart-K-143" class="node default default flowchart-label"><rect height="36.33333396911621" width="123.59375" y="-18.166666984558105" x="-61.796875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-54.296875, -10.666666984558105)" style="" class="label"><rect/><foreignObject height="21.33333396911621" width="108.59375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">🏥 codigo_os()</span></div></foreignObject></g></g><g transform="translate(1777.2812538146973, 621.833330154419)" id="flowchart-L-145" class="node default default flowchart-label"><rect height="36.33333396911621" width="265.6875" y="-18.166666984558105" x="-132.84375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-125.34375, -10.666666984558105)" style="" class="label"><rect/><foreignObject height="21.33333396911621" width="250.6875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">✅ VerificarAgenteImportesCERO()</span></div></foreignObject></g></g><g transform="translate(1430.3932304382324, 717.4999961853027)" id="flowchart-M-147" class="node default default flowchart-label"><rect height="55" width="165.90625" y="-27.5" x="-82.953125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-75.453125, -20)" style="" class="label"><rect/><foreignObject height="40" width="150.90625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">📁 Array Totales<br />o Legajos Procesados</span></div></foreignObject></g></g><g transform="translate(1430.3932304382324, 875.5624961853027)" id="flowchart-N-157" class="node default default flowchart-label"><polygon style="" transform="translate(-80.56250190734863,80.56250190734863)" class="label-container" points="80.56250190734863,0 161.12500381469727,-80.56250190734863 80.56250190734863,-161.12500381469727 0,-80.56250190734863"/><g transform="translate(-56.22916793823242, -9.333333969116211)" style="" class="label"><rect/><foreignObject height="18.666667938232422" width="112.45833587646484"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">retornar_datos?</span></div></foreignObject></g></g><g transform="translate(1222.3723945617676, 1052.2916641235352)" id="flowchart-O-159" class="node default default flowchart-label"><rect height="55" width="176.4479217529297" y="-27.5" x="-88.22396087646484" ry="0" rx="0" style="fill:#0984e3;stroke:#0066cc;" class="basic label-container"/><g transform="translate(-80.72396087646484, -20)" style="color:#fff;" class="label"><rect/><foreignObject height="40" width="161.4479217529297"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(255, 255, 255); display: inline-block; white-space: nowrap;"><span style="color:#fff;" class="nodeLabel">📄 grabar_en_txt()<br />Genera archivo SICOSS</span></div></foreignObject></g></g><g transform="translate(1430.3932304382324, 1052.2916641235352)" id="flowchart-P-161" class="node default default flowchart-label"><rect height="55" width="139.59375" y="-27.5" x="-69.796875" ry="0" rx="0" style="fill:#fdcb6e;stroke:#e17055;" class="basic label-container"/><g transform="translate(-62.296875, -20)" style="color:#000;" class="label"><rect/><foreignObject height="40" width="124.59375"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0); display: inline-block; white-space: nowrap;"><span style="color:#000;" class="nodeLabel">📦 Retorna Array<br />de Legajos</span></div></foreignObject></g></g></g></g></g></svg>